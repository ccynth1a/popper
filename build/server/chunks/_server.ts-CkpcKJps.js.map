{"version":3,"file":"_server.ts-CkpcKJps.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/highscore/_server.ts.js"],"sourcesContent":["import { j as json } from \"../../../../chunks/index2.js\";\nlet scores = [\n  {\n    username: \"Ophiuhcus\",\n    score: 901\n  },\n  {\n    username: \"CClestial\",\n    score: 954\n  },\n  {\n    username: \"P1NIT\",\n    score: 1031\n  },\n  {\n    username: \"willow\",\n    score: 1281\n  },\n  {\n    username: \"Scarlet\",\n    score: 5744\n  },\n  {\n    username: \"Crime-Person\",\n    score: 5142\n  },\n  {\n    username: \"Skye\",\n    score: 6331\n  },\n  {\n    username: \"Sam\",\n    score: 5142\n  },\n  {\n    username: \"Kamel\",\n    score: 7712\n  }\n];\nconst sortScores = function() {\n  return scores.sort((a, b) => a.score - b.score).slice(0, 9);\n};\nconst findUsernameIndex = function(user) {\n  for (let i = 0; i < scores.length; i++) {\n    if (scores[i].username == user) {\n      return i;\n    }\n  }\n  return null;\n};\nasync function GET() {\n  return json(sortScores());\n}\nasync function POST(event) {\n  const { user, score } = await event.request.json();\n  if (scores.some((element) => {\n    return element.username == user;\n  })) {\n    let current = findUsernameIndex(user);\n    if (scores[current].score > score) {\n      scores[current].score = score;\n    }\n  } else {\n    scores.push({ username: user, score });\n  }\n  console.log(scores);\n  return json(sortScores());\n}\nexport {\n  GET,\n  POST\n};\n"],"names":[],"mappings":";;AACA,IAAI,MAAM,GAAG;AACb,EAAE;AACF,IAAI,QAAQ,EAAE,WAAW;AACzB,IAAI,KAAK,EAAE,GAAG;AACd,GAAG;AACH,EAAE;AACF,IAAI,QAAQ,EAAE,WAAW;AACzB,IAAI,KAAK,EAAE,GAAG;AACd,GAAG;AACH,EAAE;AACF,IAAI,QAAQ,EAAE,OAAO;AACrB,IAAI,KAAK,EAAE,IAAI;AACf,GAAG;AACH,EAAE;AACF,IAAI,QAAQ,EAAE,QAAQ;AACtB,IAAI,KAAK,EAAE,IAAI;AACf,GAAG;AACH,EAAE;AACF,IAAI,QAAQ,EAAE,SAAS;AACvB,IAAI,KAAK,EAAE,IAAI;AACf,GAAG;AACH,EAAE;AACF,IAAI,QAAQ,EAAE,cAAc;AAC5B,IAAI,KAAK,EAAE,IAAI;AACf,GAAG;AACH,EAAE;AACF,IAAI,QAAQ,EAAE,MAAM;AACpB,IAAI,KAAK,EAAE,IAAI;AACf,GAAG;AACH,EAAE;AACF,IAAI,QAAQ,EAAE,KAAK;AACnB,IAAI,KAAK,EAAE,IAAI;AACf,GAAG;AACH,EAAE;AACF,IAAI,QAAQ,EAAE,OAAO;AACrB,IAAI,KAAK,EAAE,IAAI;AACf,GAAG;AACH,CAAC,CAAC;AACF,MAAM,UAAU,GAAG,WAAW;AAC9B,EAAE,OAAO,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AAC9D,CAAC,CAAC;AACF,MAAM,iBAAiB,GAAG,SAAS,IAAI,EAAE;AACzC,EAAE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC1C,IAAI,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,QAAQ,IAAI,IAAI,EAAE;AACpC,MAAM,OAAO,CAAC,CAAC;AACf,KAAK;AACL,GAAG;AACH,EAAE,OAAO,IAAI,CAAC;AACd,CAAC,CAAC;AACF,eAAe,GAAG,GAAG;AACrB,EAAE,OAAO,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC;AAC5B,CAAC;AACD,eAAe,IAAI,CAAC,KAAK,EAAE;AAC3B,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,KAAK,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;AACrD,EAAE,IAAI,MAAM,CAAC,IAAI,CAAC,CAAC,OAAO,KAAK;AAC/B,IAAI,OAAO,OAAO,CAAC,QAAQ,IAAI,IAAI,CAAC;AACpC,GAAG,CAAC,EAAE;AACN,IAAI,IAAI,OAAO,GAAG,iBAAiB,CAAC,IAAI,CAAC,CAAC;AAC1C,IAAI,IAAI,MAAM,CAAC,OAAO,CAAC,CAAC,KAAK,GAAG,KAAK,EAAE;AACvC,MAAM,MAAM,CAAC,OAAO,CAAC,CAAC,KAAK,GAAG,KAAK,CAAC;AACpC,KAAK;AACL,GAAG,MAAM;AACT,IAAI,MAAM,CAAC,IAAI,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC;AAC3C,GAAG;AACH,EAAE,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;AACtB,EAAE,OAAO,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC;AAC5B;;;;"}